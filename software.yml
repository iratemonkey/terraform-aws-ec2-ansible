provisioner "remote-exec" {
  inline = ["echo 'Hello World'"]

  connection {
      type        = "ssh"
      user        = "${var.ssh_user}"
      host        = "${aws_instance.my_instance.private_ip}"
      private_key = "${file(var.ssh_key_private['aws_dev'])}"
  }
}

provisioner "local-exec" {
  command = "sleep 120; ansible-playbook -i '${aws_instance.prometheus_instance.private_ip}' playbook.yml"
}
